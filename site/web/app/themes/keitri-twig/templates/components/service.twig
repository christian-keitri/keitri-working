{% set colorClasses = {
  'cyan': 'text-cyan-600',
  'amber': 'text-amber-600',
  'rose': 'text-rose-600',
  'blue': 'text-blue-600',
  'yellow': 'text-yellow-600',
  'green': 'text-green-600',
  'pink': 'text-pink-600',
  'violet': 'text-violet-600'
} %}

<!-- Alpine.js -->
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

<style>
  @keyframes orbit {
    0%   { transform: rotate(0deg) translate(var(--x), var(--y)) rotate(0deg); }
    100% { transform: rotate(360deg) translate(var(--x), var(--y)) rotate(-360deg); }
  }

  @keyframes pulse-ring {
    0%   { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.5); }
    70%  { box-shadow: 0 0 0 10px rgba(251, 191, 36, 0); }
    100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0); }
  }

  .orbiting-icon {
    animation: orbit 20s linear infinite;
    transform-origin: center center;
    transition: transform 0.3s ease;
  }

  .orbit-system:hover .orbiting-icon {
    animation-play-state: paused;
  }

  .pulse-ring {
    animation: pulse-ring 2s infinite;
    border-radius: 9999px;
  }
</style>

<section x-data="{ selected: null }" class="relative py-24 bg-white text-gray-900 dark:bg-black dark:text-white overflow-hidden">

  <!-- Section Header with fade-in -->
  <div class="text-center mb-12" x-data="{ show: false }" x-init="setTimeout(() => show = true, 200)">
    <p class="text-sm text-amber-500 dark:text-amber-400 uppercase tracking-widest mb-2 transition-all duration-700 ease-out"
       :class="{ 'opacity-0 -translate-y-2': !show, 'opacity-100 translate-y-0': show }">
      What We Offer
    </p>
    <h2 class="text-3xl md:text-4xl font-bold transition-all duration-700 delay-100 ease-out"
        :class="{ 'opacity-0 translate-y-4': !show, 'opacity-100 translate-y-0': show }">
      Explore <span class="bg-gradient-to-r from-amber-400 via-yellow-300 to-cyan-400 text-transparent bg-clip-text">
        What We Do Best
      </span>
    </h2>
    <p class="mt-2 text-gray-600 dark:text-white/70 max-w-xl mx-auto transition-all duration-700 delay-200 ease-out"
       :class="{ 'opacity-0 translate-y-4': !show, 'opacity-100 translate-y-0': show }">
      From UI/UX to full-stack development, our services are tailored to empower your business with clean design and cutting-edge tech.
    </p>
  </div>

  <!-- Flex Container -->
  <div class="flex flex-col md:flex-row items-center justify-between gap-12 max-w-7xl mx-auto px-6">

    <!-- Left: Orbit System -->
    <div class="relative w-[500px] h-[500px] flex items-center justify-center orbit-system shrink-0">
      <!-- Central Image -->
      <div class="absolute w-32 h-32 rounded-full shadow-xl z-20 overflow-hidden">
        <img src="{{ theme.link }}/assets/pic.jpg" alt="Keitri" class="w-full h-full object-cover">
      </div>

      <!-- Orbiting Icons -->
      {% for item in services %}
        <div
          class="absolute z-10 orbiting-icon cursor-pointer"
          style="--x: {{ item.x }}px; --y: {{ item.y }}px;"
          @click="selected = {
            title: '{{ item.title|e('js') }}',
            description: '{{ item.description|e('js') }}',
            icon: '{{ theme.link }}/assets/service/{{ item.icon }}',
            preview: '{{ theme.link }}/assets/{{ item.preview }}'
          }"
        >
          <div class="w-12 h-12 flex items-center justify-center transition-transform duration-300 hover:scale-110 hover:brightness-110 pulse-ring">
            <img src="{{ theme.link }}/assets/service/{{ item.icon }}" alt="{{ item.title }}" class="w-full h-full object-contain">
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Right: Detail Card -->
    <div class="w-full md:w-1/2" x-show="selected" x-transition>
    <div class="relative bg-white dark:bg-black text-gray-900 dark:text-white rounded-xl p-6 transition-all duration-300
            hover:bg-gradient-to-br hover:from-amber-500/20 hover:via-yellow-400/10 hover:to-rose-500/10
            hover:shadow-2xl hover:shadow-amber-500/30 hover:border hover:border-amber-400/10">


        <!-- Preview Image -->
        <img :src="selected.preview" alt="" class="w-full h-54 object-cover rounded-md mb-4">

        <!-- Title and Icon -->
        <div class="flex items-center gap-4 mb-4">
          <img :src="selected.icon" alt="" class="w-12 h-12 object-contain">
          <h4 class="text-lg font-bold" x-text="selected.title"></h4>
        </div>

        <!-- Description -->
        <p class="text-sm leading-relaxed mb-6" x-text="selected.description"></p>

        <!-- CTA Links -->
        <div class="flex items-center justify-between">
          <button @click="selected = null" class="text-sm text-amber-500 hover:underline">
            Close
          </button>
          <a href="#contact" class="text-sm text-amber-500 hover:underline">
            Inquire Now
          </a>
        </div>

      </div>
    </div>

  </div>
</section>
