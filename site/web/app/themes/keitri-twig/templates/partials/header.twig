{# Include in your <head> #}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<header class="relative z-50 w-full px-4 md:px-8 pt-6 bg-white dark:bg-black transition-colors duration-500">
  <div class="max-w-6xl mx-auto bg-white/90 dark:bg-black text-black dark:text-white
              backdrop-blur-lg shadow-lg rounded-full border border-black/10 dark:border-white/10
              transition-colors duration-500 px-6 md:px-10 py-3 flex items-center justify-between">

    {# Logo #}
    <a href="{{ site.url }}" class="flex items-center gap-3 text-black dark:text-white">
      <img src="{{ theme.link }}/assets/logo.png" alt="Keitri Logo" class="h-10 w-10 rounded-full">
      <span class="text-lg md:text-xl font-bold tracking-tight">Keitri Software Solutions</span>
    </a>

    {# Desktop Nav #}
    <nav class="hidden md:flex items-center gap-6">
      {% set nav = menu is defined and menu.items ? menu.items : [
        {'title':'Home',        'url': site.url,                  'slug':'home'},
        {'title':'About Us',    'url': site.url ~ '/about',       'slug':'about'},
        {'title':'Portfolio',   'url': site.url ~ '/portfolio',   'slug':'portfolio'},
        {'title':'Contact Us',  'url': site.url ~ '/contact-us',  'slug':'contact-us'}
      ] %}

      <ul class="flex items-center gap-4 text-sm font-medium text-black dark:text-white">
        {% for item in nav %}
          {% set is_current = item.current or item.slug == post.post_name %}
          <li>
            <a href="{{ item.url }}"
               class="px-4 py-2 rounded-full transition
                      {{ is_current 
                          ? 'bg-amber-400 text-black dark:bg-yellow-400 dark:text-black font-semibold' 
                          : 'hover:text-amber-400 dark:hover:text-yellow-400' }}">
              {{ item.title }}
            </a>
          </li>
        {% endfor %}
      </ul>

      {# Book a Call #}
      <a href="{{ site.url ~ '/book-a-call' }}"
         class="ml-4 inline-flex items-center gap-2 rounded-full px-5 py-2 bg-cyan-400 hover:bg-amber-400 text-black font-semibold transition-all active:scale-95 dark:bg-yellow-400 dark:hover:bg-cyan-400 dark:text-black">
        Book a call
        <i class="fas fa-arrow-up-right-from-square text-sm"></i>
      </a>

      {# Dark Mode Toggle #}
      <button id="dark-mode-toggle" class="text-xl ml-4 text-black dark:text-white hover:text-amber-400 dark:hover:text-yellow-400 transition">
        <i class="fas fa-moon hidden dark:inline"></i>
        <i class="fas fa-sun inline dark:hidden"></i>
      </button>
    </nav>

    {# Mobile Toggle #}
    <button id="mobile-menu-toggle" class="md:hidden text-black dark:text-white text-2xl focus:outline-none transition">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  {# Mobile Nav Drawer #}
  <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-black border-t border-black/10 dark:border-white/10 transition-colors duration-500 px-6 py-4 rounded-b-2xl mt-2 shadow-lg max-w-6xl mx-auto">
    <div class="flex flex-col space-y-3">
      {% for item in nav %}
        <a href="{{ item.url }}" class="text-black dark:text-white py-2 border-b border-black/10 dark:border-white/10 hover:text-amber-400 dark:hover:text-yellow-400 transition">
          {{ item.title }}
        </a>
      {% endfor %}
      <a href="{{ site.url ~ '/book-a-call' }}"
         class="inline-block mt-3 rounded-full px-6 py-2 bg-cyan-400 hover:bg-amber-400 text-black font-semibold text-center transition dark:bg-yellow-400 dark:hover:bg-cyan-400 dark:text-black">
        Book a call
      </a>
      <button id="dark-mode-toggle-mobile" class="mt-4 text-left text-black dark:text-white hover:text-amber-400 dark:hover:text-yellow-400 text-sm flex items-center gap-2">
        <i class="fas fa-moon hidden dark:inline"></i>
        <i class="fas fa-sun inline dark:hidden"></i>
        Toggle Dark Mode
      </button>
    </div>
  </div>

  <script>
    document.getElementById('mobile-menu-toggle').addEventListener('click', function () {
      document.getElementById('mobile-menu').classList.toggle('hidden');
    });

    function toggleDarkMode() {
      const html = document.documentElement;
      const isDark = html.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }

    document.getElementById('dark-mode-toggle')?.addEventListener('click', toggleDarkMode);
    document.getElementById('dark-mode-toggle-mobile')?.addEventListener('click', toggleDarkMode);

    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    });
  </script>
</header>
